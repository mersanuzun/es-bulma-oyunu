<html>
  <head>
    <meta name="name" content="content" charset="UTF-8">
    <title></title>
    <script src="game.js"></script>
    <script src="Cell.js"></script>
    <script type="text/javascript"></script>
    <script src="jquery.js"></script>
    <style>
      #table {
        margin : 0px auto;
      }
      #table td{
        width : 50px;
        height : 50px;
        border : 1px solid;
        text-align : center;
      }
      .hiding{
        width : 50px;
        height : 45px;
        background-color: #fee4de;
      }
        #guess {
            margin-left: 41%;
        }
    </style>
  </head>
  <body>
    <table id="table">
      <tbody>
      </tbody>
    </table>
    <b><span id="guess"></span></b>
    <script>
      $(document).ready(function(){
        var boardSize = prompt("Please, enter a board size. 2-4-6-8")
        var cells = createBoard(boardSize);
        console.log(cells)
        var click = 1;
          var correct = 0;
        var table = $("#table tbody");
        for (var x = 0; x < boardSize; x++){
          var row = $("<tr>");
          for (var y = 0; y < boardSize; y++){
            var cell = $("<td></td>")
            cell.append("<div id='" + x + "" + y + "'style='background-color:#83F4EC; width:100%; height:100%;'>")
            cell.data({'x' : x, 'y' : y});
            row.append(cell);
          }
          table.append(row);
        }
        $("#table td").on("click", function(){
            if (correct == (boardSize * boardSize) / 2) return
            $that = $(this);
            var xCoor = $that.data("x");
            var yCoor = $that.data("y");
            if (click != 2){
                $("#" + xCoor + "" + yCoor).css("background-color", "#007871")
                $("#" + xCoor + "" + yCoor).html(cells[xCoor][yCoor].symbol);
                controlCell(cells[xCoor][yCoor]);
                click++;
            }else {
                $("#" + xCoor + "" + yCoor).css("background-color", "#007871")                
                $("#" + xCoor + "" + yCoor).html(cells[xCoor][yCoor].symbol);
                var oldCoord = controlCell(cells[xCoor][yCoor]);
                if (oldCoord instanceof Cell){
                    setTimeout(function(){
                        $("#" + oldCoord.coorX + "" + oldCoord.coorY).html("");
                        $("#" + xCoor + "" + yCoor).html("");
                        $("#" + xCoor + "" + yCoor).css("background-color", "#83F4EC");
                        $("#" + oldCoord.coorX + "" + oldCoord.coorY).css("background-color", "#83F4EC");
                    }, 1000)
                }else {
                    correct++;
                    console.log(correct)
                }
                guess++;
                console.log(guess)
                click = 1;
                if (correct == (boardSize * boardSize) / 2) {
                    $("#guess").text("Game is finished. You made " + guess + " guess.")
                }
            }
        });
      })
    </script>
  </body>
</html>
